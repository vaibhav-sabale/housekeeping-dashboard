<div class="app">
  <header class="topbar">
    <p-toolbar>
      <ng-template #start>
        <div class="breadcrumb">
          <button class="back-btn" type="button" aria-label="Back">
            <i class="pi pi-arrow-left"></i>
          </button>
          <span class="breadcrumb-muted">Unicorn Groups / Radiant Retreat /</span>
          <span class="breadcrumb-active">Task Management</span>
        </div>
      </ng-template>

      <ng-template #end>
        <div class="topbar-actions">
          <a class="logo-link" aria-label="Aura home">
            <img class="logo" src="assets/svg/aura-logo.svg" alt="aura">
          </a>

          <button class="icon-btn icon-btn--label" type="button" aria-label="Chat">
            <img class="icon" src="assets/svg/chat.svg" alt="">
            <span class="icon-label">Chat</span>
          </button>

          <button class="icon-btn" type="button" aria-label="Notifications">
            <i class="pi pi-bell"></i>
          </button>

          <button class="icon-btn" type="button" aria-label="Apps">
            <img class="icon" src="assets/svg/menu.svg" alt="">
          </button>
        </div>
      </ng-template>
    </p-toolbar>

    <div class="page-header">
      <h1 class="page-title">Property Overview</h1>

      <!-- PrimeNG toggle -->
      <div class="toolbar">
        <div class="view-toggle selectbtn" aria-label="View toggle">
          <p-selectbutton [options]="stateOptions" [(ngModel)]="value" optionLabel="label" optionValue="value"
            aria-labelledby="basic">
          </p-selectbutton>
        </div>

        <div class="card flex flex-col items-center gap-4">
          <p-iconfield>
            <p-inputicon class="pi pi-search" />
            <input pInputText placeholder="Search" pSize="small" />
          </p-iconfield>
        </div>

        <div class="prime-date">
          <p-datepicker [(ngModel)]="selectedDate" dateFormat="dd MM yy" appendTo="body"></p-datepicker>
        </div>

        <button class="pill" type="button">
          <i class="pi pi-filter"></i>
          Filters
        </button>

        <button class="btn-primary" type="button">
          Auto Assign
          <i class="pi pi-sparkles"></i>
        </button>
      </div>
    </div>
  </header>

  <main class="main">
    <section class="dark-strip">
      <div class="container">
        <section class="summary">
          <div class="summary-left">
            <div class="page--legend-column">
              <div class="legend">

                <!-- multiâ€‘color progress bar -->
                <div class="legend--bar">
                  <p-metergroup [value]="progressValue">
                    <ng-template #meter let-value let-class="class" let-width="size">
                      <span [class]="class" [style]="{ background: value.color, width: width }">
                        <span class="text-grp">{{value.value}}%</span>
                      </span>
                    </ng-template>
                    <ng-template #label>
                      <div class="legend-labels-grid">
                        @for (item of progressValue; track item.label; let i = $index) {
                          <div class="meter-item">
                            <i class="pi pi-minus" [style.color]="item.color"></i>
                            <span class="meter-label">{{ item.label }}</span>
                          </div>
                        }
                      </div>
                    </ng-template>
                  </p-metergroup>
                </div>


              </div>
            </div>
          </div>

          <div class="summary-right">
            <div class="kpi-grid">
              <!-- Occupancy card -->
              <p-card class="kpi-card kpi-card--occupancy" role="region">
                <div class="kpi-body kpi-body--occupancy">
                  <div class="kpi-title-oc">Occupancy</div>
                  <div class="kpi-occupancy">
                    <span class="kpi-value">232</span>
                    <span class="kpi-occupancy-max">/ 290</span>
                  </div>
                </div>

                <div class="card flex justify-center">
                  <p-chart type="doughnut" [data]="data" [options]="options" [plugins]="plugins"
                    class="w-full md:w-[30rem]">
                  </p-chart>
                </div>

              </p-card>

              <!-- KPI cards -->
              @for (kpi of kpis; track kpi.title) {
              <p-card class="kpi-card kpi-card--small" role="region">
                <div class="kpi-body kpi-body--compact">
                  <div class="kpi-title">{{ kpi.title }}</div>
                  <div class="kpi-value">{{ kpi.value }}</div>
                  <div class="kpi-foot">
                    <span class="kpi-chip" [ngClass]="kpi.chipClass">{{ kpi.chipText }}</span>
                    <span class="kpi-note">{{ kpi.note }}</span>
                  </div>
                </div>

                <div class="kpi-icon-wrap" aria-hidden="true">
                  <img class="kpi-icon" [src]="'assets/svg/' + kpi.icon" alt="">
                </div>
              </p-card>
              }
            </div>
          </div>
        </section>
      </div>
    </section>
  </main>
</div>